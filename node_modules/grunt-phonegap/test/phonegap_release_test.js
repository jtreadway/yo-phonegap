(function() {
  var fs, grunt, path, pkg;

  grunt = require('grunt');

  pkg = grunt.file.readJSON('package.json');

  path = require('path');

  fs = require('fs');

  exports.phonegap = {
    'tree should be created': function(test) {
      test.expect(2);
      test.ok(grunt.file.isDir('test/releases'), 'should create the releases directory');
      test.ok(grunt.file.isDir('test/releases/android'), 'should create the releases platform directory');
      return test.done();
    },
    'signed apk should be created': function(test) {
      var apk,
        _this = this;
      test.expect(2);
      apk = path.join('test', 'releases', 'android', "" + pkg.name + "-" + pkg.version + ".apk");
      test.ok(grunt.file.isFile(apk), "" + apk + " does not exist");
      return fs.stat(apk, function(err, stats) {
        test.notEqual(stats.size, 0, "" + apk + " is an empty file");
        return test.done();
      });
    }
  };

}).call(this);
